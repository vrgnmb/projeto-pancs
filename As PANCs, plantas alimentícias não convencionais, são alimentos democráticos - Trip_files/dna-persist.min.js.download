//dna-persist.min_2.1.13
var DnaUOL=function(){function t(){this.closure=[],this.uid=null}function a(){var e=!0;for(var a in t.closure)e=e&&/((no)*hasUid|finalized)/i.test(t.closure[a].status);return e}function r(){for(var e in t.closure){var a=t.closure[e];"standby"==a.status&&(a.instance=t.instantiate(a.options,a.id),a.status="initiated")}}var n=function(){var a={parent:t,networkTime:0},r={async:function(){function e(e,t,a,r){var n={maxCalls:r||Number.POSITIVE_INFINITY,actualCall:0,data:[],lastComputedData:null,error:[],lastComputedError:null,lastCall:!1,proceed:function(){},then:function(){},clear:function(){},stopOnError:!0,isRunning:!0,userData:e,intervId:null},i=function(e,a){function r(){if(0==a&&(n.isRunning=!1,clearInterval(n.intervId)),1==a&&(n.lastCall=!0),a-- >0)try{r.state.data[n.actualCall]=t.call(r,n),r.state.lastComputedData=r.state.data[n.actualCall],n.actualCall+=1}catch(e){n.stopOnError&&(a=0),r.state.error[n.actualCall]=e,r.state.lastComputedError=r.state.error[n.actualCall];try{r.state.data[n.actualCall]=t.call(r,n),r.state.lastComputedData=r.state.data[n.actualCall]}catch(e){n.stopOnError||(n.actualCall+=1)}}if(a!=Number.POSITIVE_INFINITY&&r.state.userData&&!/__nolog/.test(r.state.userData)){var i="object"==typeof r.state.userData?r.state.userData[0]+r.state.userData[1]:r.state.userData;o.debug("async_"+i,{wait:e,times:a,actualCall:r.state.actualCall,maxCalls:r.state.maxCalls})}}return n.clear=function(){return n.isRunning?(a=0,n.isRunning=!1,clearInterval(n.intervId),null):null},n.proceed=function(){return n.isRunning?null:(a=n.maxCalls-n.actualCall,n.isRunning=!0,null)},r.state=n,r.clear=n.clear,r.proceed=n.proceed,r}(a,r||Number.POSITIVE_INFINITY);return n.intervId=setInterval(function(){i()},a),i}function t(t,a,r,n){return e(t,a,r,n)}return t}(),glMatrix:function(){return'glMatrixArrayType=typeof Float32Array!="undefined"?Float32Array:typeof WebGLFloatArray!="undefined"?WebGLFloatArray:Array;var mat4={};mat4.create=function(a){var b=new glMatrixArrayType(16);if(a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15]}return b};mat4.identity=function(a){a=a||new Float32Array(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};mat4.translate=function(a,b,c){var d=b[0],e=b[1];b=b[2];if(!c||a==c){a[12]=a[0]*d+a[4]*e+a[8]*b+a[12];a[13]=a[1]*d+a[5]*e+a[9]*b+a[13];a[14]=a[2]*d+a[6]*e+a[10]*b+a[14];a[15]=a[3]*d+a[7]*e+a[11]*b+a[15];return a}var g=a[0],f=a[1],h=a[2],i=a[3],j=a[4],k=a[5],l=a[6],o=a[7],m=a[8],n=a[9],p=a[10],r=a[11];c[0]=g;c[1]=f;c[2]=h;c[3]=i;c[4]=j;c[5]=k;c[6]=l;c[7]=o;c[8]=m;c[9]=n;c[10]=p;c[11]=r;c[12]=g*d+j*e+m*b+a[12];c[13]=f*d+k*e+n*b+a[13];c[14]=h*d+l*e+p*b+a[14];c[15]=i*d+o*e+r*b+a[15];return c};mat4.perspective=function(a,b,c,d,e){a=c*Math.tan(a*Math.PI/360);b=a*b;return mat4.frustum(-b,b,-a,a,c,d,e)};mat4.frustum=function(a,b,c,d,e,g,f){f||(f=mat4.create());var h=b-a,i=d-c,j=g-e;f[0]=e*2/h;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=e*2/i;f[6]=0;f[7]=0;f[8]=(b+a)/h;f[9]=(d+c)/i;f[10]=-(g+e)/j;f[11]=-1;f[12]=0;f[13]=0;f[14]=-(g*e*2)/j;f[15]=0;return f};'},swfObject:function(){return'DnaUOL.swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit[/](d+(.d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*s+(S+s+S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*.(.*)s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return !a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+encodeURI(O.location).toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=" class=\'"+ai[ae]+"\'"}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+"=\'"+ai[ae]+"\'"}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+="<param name=\'"+ad+"\' value=\'"+ag[ad]+"\' />"}}aa.outerHTML="<object classid=\'clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\'"+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\'<>.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in DnaUOL.swfobject){DnaUOL.swfobject[X]=null}DnaUOL.swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/[?]/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();'}},n=new function(){var e=function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?a:3&a|8).toString(16)});return e.toString(16)+"-"+t}(),t="/service",r={_ad:"dna.uol.com.br",_ap:"https://",_ak:"DNA",_ll:["error"],_lfd:"f",_uf:30,_muf:365,_cvs:"|",_usp:"/service/sample",_srsp:"/service/sample/conn",_lp:t+"/logger",_csp:t+"/cookie",_esp:t+"/etag",_bsp:t+"/base64",_acsp:t+"/iframe",_fssp:t+"/iframefs",_ssp:t+"/drp",_simpleSyncServicePath_:t+"/ts",_op:!0,_wi:"dna-uol-wrapper",_ws:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_ai:30,_maa:15,_ics:!1,_sc:"persist",_sv:"2.1.13",_guid:e};a._ad=r._ad,a._ap=r._ap,a.appUrl=a._ap+a._ad,this.get=function(e){return void 0!==r[e]?r[e]:null}},o=new function(){var e,t,r={},i=0,s={},u=[],d=[],f={process:0,elapsed:0,count:0},p=this,g=function(e){e.type in d&&d[e.type]++;var t=e.stack.join("_");t in s?s[t].push(e):s[t]=[e],i++},h=function(){var e={};if(i!=s.length){e.scriptVersion='"'+n.get("_sv")+"_"+n.get("_sc")+'"',e.navigator={},e.navigator.userAgent='"'+String(a.browser.name+" ("+navigator.userAgent+")")+'"',e.navigator.platform='"'+String(navigator.platform)+'"',e.origin='"'+String(location.protocol+"//"+location.hostname+location.pathname)+'"',e.date='"'+String(o.getNowDate(!0))+'"',"performance"in window&&"timing"in performance&&(e.timing=v()),e.log=m();var r="persist"!=n.get("_sc")?(new Detections).get("resolution").get():null;"mobile"in a.browser&&(e.navigator.mobile='"'+a.browser.mobile+(r?" "+r.physicalResolution+" "+r.devicePixelRatio+'dppx"':'"')),t=e}else e=t;return e},v=function(){var e=performance.timing,t={};t.navigationStart=e.navigationStart;for(var a in e)/boolean|string|number/.test(typeof e[a])&&"navigationStart"!=a&&(t[a]=e[a]>0?e[a]-t.navigationStart:e[a]);return'"'+JSON.stringify(t).replace(/"/g,"'")+'"'},m=function(){var e={};for(var t in s){for(var a={},r=0;r<s[t].length;r++){var n=s[t][r],i="";"debug"!=n.type&&(i+="["+n.type.toUpperCase()+"] ");for(var o=0;o<n.messages.length;o++)i+="object"==typeof n.messages[o]?JSON.stringify(n.messages[o]):String(n.messages[o]);a[n.time]='"'+i.replace(/([^\\])"/g,"$1'")+'"'}var c=e,u=n.stack.slice(0);do{var l=u.shift();l in c||(c[l]=0==u.length?a:{}),c=c[l]}while(u.length>0)}return e},y=function(){var e=h(),t=[],a=0;t.push("\n\n{");for(var r in e)t.push(b(r,e[r],0,a)),a++;return t.push("\n}"),t.join("")},b=function(e,t,a,r){for(var n,i="",s=0;s<a;s++)i+="\t";if(n=r?", ":"  ","object"==typeof t){var o="\n"+i+n+'"'+e+'": {';r=0;for(var c in t)o+=b(c,t[c],s+1,r),r++;return o+="\n"+i+"}"}if(t instanceof Array)return"\n"+i+n+'"'+e+'": "['+t.join(", ")+']"';if("function"==typeof t)return"\n"+i+n+'"'+e+'": "[function]"';var c=String(t);return/optionalImageCanvas/.test(c)&&(c=c.replace(/(base64,[a-zA-Z0-9\+\/]{100})[a-zA-Z0-9\+\/]+([a-zA-Z0-9\+\/\=]{100}\')/g,"$1...$2")),c=c.replace(/'\:\s*'"\s*(\}|,)/g,"':''$1"),"\n"+i+n+'"'+e+'": '+c},w=function(){var e=0;for(var t in d)e+=d[t];return e>0},D=function(e){try{var t=n.get("_lfd").split(" ");if(e){var a=e.getUid();return!!/[0-9a-f]{32}/.test(a)&&S(a,t)}return S("0123456789abcdef".substring(parseInt(16*Math.random(),10),1),t)}catch(e){return!1}},S=function(e,t){for(var a=!1,r=0;r<t.length;r++){new RegExp("^"+t[r]).test(e)&&(a=!0)}return a},C=function(e){var t=a.appUrl+n.get("_lp");l.post({url:t,data:e,dataType:"text",error:function(e){_(e)}})},_=function(e){var t={};for(var r in s)if(/xhrRequest_(.*error|NoCrossDomain)/i.test(r)||/XDRequest_(onerror|tryAgain|timeout)/i.test(r))for(var i=0;i<s[r].length;i++){var o=s[r][i].messages[0].url.match(/\/(\w+).*/);o.length>=1&&(t[o[1]]=s[r][i].messages[0].status?s[r][i].messages[0].status:0)}var c=a.appUrl+n.get("_lp");l.get({url:c,data:t,cache:!1})},k=function(e,t){var a="";t=t||(e.length>2?e.length:2);for(var r=0;r<t-1;r++)a+="0";var n=a+e;return n.substr(n.length-t)},x=function(){return(new Date).getTime()};this.getNow=function(){return x()},this.getNowDate=function(e){var t=new Date,a="";return e&&(a+=String(k(t.getDate())+"/"+k(t.getMonth()+1)+"/"+t.getFullYear()+" ")),a+=String(k(t.getHours())+":"+k(t.getMinutes())+":"+k(t.getSeconds())+"."+k(t.getMilliseconds(),3))},this.startTimer=function(e){e&&""!=e||(e="default",E()),e in r||(r[e]=x())},this.getTime=function(e){return e&&""!=e||(e="default"),e in r?x()-r[e]:null};var E=function(){setInterval(function(){f.process++},1)},T=function(){var e=x(),t={process:f.process,elapsed:e-(f.elapsed?f.elapsed:x()-1),count:f.count};return f.process=0,f.elapsed=e,f.count++,t};this.commit=function(e){var t=p.getTime(),r={};if(r.total=t,a&&(r.process=t-a.networkTime,r.network=a.networkTime),o.debug("performance",r),w()&&D(e))try{o.debug("send_logger",!0);var n=y();C(n)}catch(e){_(e)}},this.getData=function(){return y()},this.getObjectData=function(){return h()};var A=function(e,t,a){var r=p.getTime(),n=T();return{stack:u.concat(e),time:"N"+f.count+"_T"+r+"_E"+n.elapsed+"_P"+n.process,type:a,messages:t}},I=function(e){e.constructor!==Array&&(e=[e]);for(var t=e.length-1;t>=0;t--)u[u.length-1]==e[t]&&u.pop()},R=function(e,t){var a=e[0].match(/^([\+|\-]*)(.*)/),r=null,n="";if("+"==a[1]&&u[u.length-1]!=a[2])u=u.concat(a[2].split("."));else if("-"==a[1])I(a[2].split("."));else{var i=e[0].split(".");i.length>1?(n=i.pop(),r=i,u=u.concat(i)):n=a[2]}if(e.length>1){for(var s=[],o=1;o<e.length;o++)s.push(e[o]);g(A(n,s,t))}r&&I(r)};this.error=function(){R(arguments,"error")},this.warning=function(){R(arguments,"warning")},this.debug=function(){R(arguments,"debug")},this.addEvent=function(e){R(["external",c.toHtmlEntities(c.trim(String(e)))],"event")},this.begin=function(t){e="object"==typeof t?t:["error","warning","debug"];for(var a in e)d[e[a]]=0}};this.Log=o;var c=new function(){var e=n.get("_ws"),t=this;this.getHtmlWrapper=function(){var e=!1;try{var t=n.get("_wi");if(null!=document.getElementById(t))e=document.getElementById(t);else{var e=document.createElement("div");e.id=t,e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="1px",e.style.left="1px",e.style.overflow="hidden",document.getElementsByTagName("body")[0].appendChild(e)}}catch(e){o.error("Helpers.getHtmlWrapper",e)}return e},this.removeHtmlWrapper=function(){var e=!1;try{var t=this.getHtmlWrapper();t&&t.parentNode.removeChild(t),e=!0}catch(e){o.error("Helpers.removeHtmlWrapper",e)}return e},this.removeHtmlElement=function(e){var t=!1;try{"string"==typeof e&&(e=document.getElementById("id")),e&&(this.getHtmlWrapper().removeChild(e),t=!0)}catch(e){o.error("Helpers.removeHtmlElement",e)}return t},this.createHtmlElement=function(e,t){var a=!1;try{if(a="string"==typeof t.id&&document.getElementById(t.id)?document.getElementById(t.id):document.createElement(e)){for(var r in t)"id"==r&&"string"==typeof t[r]?a.id=t.id:"html"==r&&"string"==typeof t[r]?a.innerHTML=t.id:a.setAttribute(r,t[r]);this.getHtmlWrapper().appendChild(a)}}catch(e){o.error("Helpers.createHtmlElement",e)}return a},this.getBrowser=function(){var e={};try{var t=(arguments.length>0&&"string"==typeof arguments[0]?arguments[0]:navigator.userAgent).toLowerCase();switch(!0){case/opera.*version\/(\d+)([\d\.]*)/.test(t):case/opera[\/\s](\d+)([\d\.]*)/.test(t):case/opr\/(\d+)([\d\.]*)/.test(t):e=r("OPERA","isOpera",RegExp.$1,RegExp.$2);break;case/trident\/.*rv\:(\d+)([\d\.]*)/.test(t):case/msie[\/\s](\d+)([\d\.]*)/.test(t):e=r("MSIE","isIE",RegExp.$1,RegExp.$2);break;case/edge\/(\d+)([\d\.]*)/.test(t):e=r("EDGE","isEdge",RegExp.$1,RegExp.$2);break;case/chrome\/(\d+)([\d\.]*)/.test(t):case/crios\/(\d+)([\d\.]*)/.test(t):e=r("CHROME","isChrome",RegExp.$1,RegExp.$2);break;case/android.*version\/(\d+)([\d\.]*).*safari/.test(t):e=r("ANDROID BROWSER","isAndroidBrowser",RegExp.$1,RegExp.$2);break;case/fxios\/(\d+)([a-z\d\.]*)/.test(t):e=r("FIREFOX","isFirefox",RegExp.$1,RegExp.$2);break;case/version\/(\d+)([\d\.]*).*safari/.test(t):case/iphone.*instagram\s(\d+)([\d\.]*)/.test(t):case/iphone|ipad.*os\s(\d+)([\d_]*)/.test(t):e=r("SAFARI","isSafari",RegExp.$1,RegExp.$2);break;case/firefox\/(\d+)([\d\.]*)/.test(t):e=r("FIREFOX","isFirefox",RegExp.$1,RegExp.$2);break;case/adobeair\/(\d+)([\d\.]*)/.test(t):e=r("ADOBEAIR","isAdobeAir",RegExp.$1,RegExp.$2);break;default:e=r("","","-1","")}c.isMobile.Android()?e.mobile="ANDROID":c.isMobile.BlackBerry()?e.mobile="BLACKBERRY":c.isMobile.iOS()?e.mobile="iOS":c.isMobile.Windows()&&(e.mobile="IEMobile"),e.name=e.alias+" "+e.nVersion}catch(e){o.error("Helpers.getBrowser",e)}return e};var r=function(e,t,a,r){var n={alias:e,version:"-1"==a?"":a+r,nVersion:parseInt(a,10)};return""!=t&&(n[t]=!0),n};this.isMobile={Android:function(){return/android/i.test(navigator.userAgent)},BlackBerry:function(){return/blackberry/i.test(navigator.userAgent)},iOS:function(){return/iP(hone|ad|od)/i.test(navigator.userAgent)},Windows:function(){return/IEMobile/i.test(navigator.userAgent)},any:function(){return t.isMobile.Android()||t.isMobile.BlackBerry()||t.isMobile.iOS()||t.isMobile.Windows()}},this.flashSupport=function(){var e=!1;try{a.browser.isIE&&"undefined"!=typeof ActiveXObject?e=Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")):(a.browser.isChrome&&a.browser.nVersion<53||a.browser.isFirefox&&a.browser.nVersion<48||!a.browser.isChrome&&!a.browser.isFirefox)&&(e=navigator.mimeTypes&&Boolean(navigator.mimeTypes["application/x-shockwave-flash"]))}catch(t){o.debug("Helpers.flashSupport","Navegador não suporta flash"),e=!1}return e},this.getCookie=function(e,t){var a=e.split(";"),r="",n="",s=!1;for(i=0;i<a.length;i++){if(r=a[i].split("="),r[0].replace(/^\s+|\s+$/g,"")==t)return s=!0,r.length>1&&(n=unescape(r[1].replace(/^\s+|\s+$/g,""))),n;r=null,""}if(!s)return null},this.trim=function(e){var t=e;try{t=null==e?"":(e+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}catch(e){o.error("Helpers.trim",e)}return t},this.setUrlParameter=function(e,t,a){var r="";try{if(e.indexOf("&"+t+"=")>-1||0==e.indexOf(t+"=")){var n=e.indexOf("&"+t+"=");-1==n&&(n=e.indexOf(t+"="));var i=e.indexOf("&",n+1);return-1!=i?e.substr(0,n)+e.substr(i+(n?0:1))+"&"+t+"="+a:e.substr(0,n)+"&"+t+"="+a}r=e+"&"+t+"="+a}catch(e){o.error("Helpers.setUrlParameter",e)}return r},this.getUrlParameter=function(e,t){if("string"==typeof e&&"string"==typeof t)try{for(var a=t+"=",r=e.split(/[;&]/),n=0;n<r.length;n++){for(var i=r[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(a))return i.substring(a.length,i.length)}}catch(e){o.error("Helpers.getUrlParameter",e)}return""},this.encode=function(t){var a="";if("string"==typeof t)try{var r,n,i,s,c,u,l,d=0;for(t=this.UTF8Encode(t);d<t.length;)r=t.charCodeAt(d++),n=t.charCodeAt(d++),i=t.charCodeAt(d++),s=r>>2,c=(3&r)<<4|n>>4,u=(15&n)<<2|i>>6,l=63&i,isNaN(n)?u=l=64:isNaN(i)&&(l=64),a+=e.charAt(s)+e.charAt(c)+e.charAt(u)+e.charAt(l)}catch(e){o.error("Helpers.encode",e)}return a},this.decode=function(t){var a="";if("string"==typeof t)try{var r,n,i,s,c,u,l,d=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<t.length;)s=e.indexOf(t.charAt(d++)),c=e.indexOf(t.charAt(d++)),u=e.indexOf(t.charAt(d++)),l=e.indexOf(t.charAt(d++)),r=s<<2|c>>4,n=(15&c)<<4|u>>2,i=(3&u)<<6|l,a+=String.fromCharCode(r),64!=u&&(a+=String.fromCharCode(n)),64!=l&&(a+=String.fromCharCode(i));a=this.UTF8Decode(a)}catch(e){o.error("Helpers.decode",e)}return a},this.UTF8Encode=function(e){var t="";if("string"==typeof e)try{for(var e=e.replace(/\r\n/g,"\n"),a=0;a<e.length;a++){var r=e.charCodeAt(a);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}}catch(e){o.error("Helpers.UTF8Encode",e)}return t},this.UTF8Decode=function(e){var t="";if("string"==typeof e)try{for(var a=0,r=c1=c2=0;a<e.length;)r=e.charCodeAt(a),r<128?(t+=String.fromCharCode(r),a++):r>191&&r<224?(c2=e.charCodeAt(a+1),t+=String.fromCharCode((31&r)<<6|63&c2),a+=2):(c2=e.charCodeAt(a+1),c3=e.charCodeAt(a+2),t+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),a+=3)}catch(e){o.error("Helpers.UTF8Decode",e)}return t},this.toHtmlEntities=function(e){var t=e;try{var a={20:"&#160;",22:"&#34;",27:"&#39;","3C":"&#60;","3E":"&#62;",C2A1:"&#161;",C2A2:"&#162;",C2A3:"&#163;",C2A4:"&#164;",C2A5:"&#165;",C2A6:"&#166;",C2A7:"&#167;",C2A8:"&#168;",C2A9:"&#169;",C2AA:"&#170;",C2AB:"&#171;",C2AC:"&#172;",C2AE:"&#174;",C2AF:"&#175;",C2B0:"&#176;",C2B1:"&#177;",C2B2:"&#178;",C2B3:"&#179;",C2B4:"&#180;",C2B5:"&#181;",C2B6:"&#182;",C2B7:"&#183;",C2B9:"&#185;",C2BA:"&#186;",C2BB:"&#187;",C2BC:"&#188;",C2BD:"&#189;",C2BE:"&#190;",C2BF:"&#191;",C397:"&#215;",C3B7:"&#247;",C380:"&#192;",C381:"&#193;",C382:"&#194;",C383:"&#195;",C384:"&#196;",C385:"&#197;",C386:"&#198;",C387:"&#199;",C388:"&#200;",C389:"&#201;",C38A:"&#202;",C38B:"&#203;",C38C:"&#204;",C38D:"&#205;",C38E:"&#206;",C38F:"&#207;",C390:"&#208;",C391:"&#209;",C392:"&#210;",C393:"&#211;",C394:"&#212;",C395:"&#213;",C396:"&#214;",C398:"&#216;",C399:"&#217;",C39A:"&#218;",C39B:"&#219;",C39C:"&#220;",C39D:"&#221;",C39E:"&#222;",C39F:"&#223;",C3A0:"&#224;",C3A1:"&#225;",C3A2:"&#226;",C3A3:"&#227;",C3A4:"&#228;",C3A5:"&#229;",C3A6:"&#230;",C3A7:"&#231;",C3A8:"&#232;",C3A9:"&#233;",C3AA:"&#234;",C3AB:"&#235;",C3AC:"&#236;",C3AD:"&#237;",C3AE:"&#238;",C3AF:"&#239;",C3B0:"&#240;",C3B1:"&#241;",C3B2:"&#242;",C3B3:"&#243;",C3B4:"&#244;",C3B5:"&#245;",C3B6:"&#246;",C3B8:"&#248;",C3B9:"&#249;",C3BA:"&#250;",C3BB:"&#251;",C3BC:"&#252;",C3BD:"&#253;",C3BE:"&#254;",C3BF:"&#255;"};t=t.replace(new RegExp("&","g"),"&#38;");for(var r in a){var n=decodeURIComponent("%"+r.match(/.{1,2}/g).join("%"));t=t.replace(new RegExp(n,"g"),a[r])}}catch(e){o.error("Helpers.toHtmlEntities",e)}return t}};this.Helpers=c;var u=new function(){this.get=function(t){return void 0!==e[t]?new e[t]:null};var e=new function(){this.swf=function(){if(!s.swfobject){var e,t=document.createElement("script");a.browser.isIE&&parseInt(a.browser.version,10)<=8?t.text=r.swfObject():(e=document.createTextNode(r.swfObject()),t.appendChild(e)),document.getElementsByTagName("head")[0].appendChild(t)}this.create=function(){try{if(s.swfobject){c.createHtmlElement("div",{id:"dnauol-swf-wrapper"}).innerHTML='<div id="dnauol-swf"></div>',s.swfobject.embedSWF(a.appUrl+"/resource/dna.swf","dnauol-swf","1","1","9",{},{},{allowscriptaccess:"always"})}}catch(e){o.error("Library.swf.create",e)}},this.createHandler=function(){var e;try{e=s.swfobject.getObjectById("dnauol-swf"),e?this.handler=e:e=!1}catch(t){o.error("Library.swf.cacheHandler",t),e=!1}return e}},this.jsonParser=function(){this.parse=function(e){if("JSON"in window&&"parse"in window.JSON)return window.JSON.parse(e);if(null===e)return e;if("string"==typeof e&&(e=c.trim(e))){return new Function('return (function(){var at,ch,escapee={\'"\':\'"\',"\\\\":"\\\\","/":"/",b:"\\b",f:"\\f",n:"\\n",r:"\\r",t:"\\t"},text,error=function(m){throw {name:"SyntaxError",message:m,at:at,text:text};},next=function(c){if(c&&c!==ch){error("Expected \'"+c+"\' instead of \'"+ch+"\'");}ch=text.charAt(at);at+=1;return ch;},number=function(){var number,string="";if(ch==="-"){string="-";next("-");}while(ch>="0"&&ch<="9"){string+=ch;next();}if(ch==="."){string+=".";while(next()&&ch>="0"&&ch<="9"){string+=ch;}}if(ch==="e"||ch==="E"){string+=ch;next();if(ch==="-"||ch==="+"){string+=ch;next();}while(ch>="0"&&ch<="9"){string+=ch;next();}}number=+string;if(!isFinite(number)){error("Bad number");}else{return number;}},string=function(){var hex,i,string="",uffff;if(ch===\'"\'){while(next()){if(ch===\'"\'){next();return string;}if(ch==="\\\\"){next();if(ch==="u"){uffff=0;for(i=0;i<4;i+=1){hex=parseInt(next(),16);if(!isFinite(hex)){break;}uffff=uffff*16+hex;}string+=String.fromCharCode(uffff);}else{if(typeof escapee[ch]==="string"){string+=escapee[ch];}else{break;}}}else{string+=ch;}}}error("Bad string");},white=function(){while(ch&&ch<=" "){next();}},word=function(){switch(ch){case"t":next("t");next("r");next("u");next("e");return true;case"f":next("f");next("a");next("l");next("s");next("e");return false;case"n":next("n");next("u");next("l");next("l");return null;}error("Unexpected \'"+ch+"\'");},value,array=function(){var array=[];if(ch==="["){next("[");white();if(ch==="]"){next("]");return array;}while(ch){array.push(value());white();if(ch==="]"){next("]");return array;}next(",");white();}}error("Bad array");},object=function(){var key,object={};if(ch==="{"){next("{");white();if(ch==="}"){next("}");return object;}while(ch){key=string();white();next(":");if(Object.hasOwnProperty.call(object,key)){error(\'Duplicate key "\'+key+\'"\');}object[key]=value();white();if(ch==="}"){next("}");return object;}next(",");white();}}error("Bad object");};value=function(){white();switch(ch){case"{":return object();case"[":return array();case\'"\':return string();case"-":return number();default:return ch>="0"&&ch<="9"?number():word();}};return function(source,reviver){var result;text=source;at=0;ch=" ";result=value();white();if(ch){error("Syntax error");}return typeof reviver==="function"?(function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}return reviver.call(holder,key,value);}({"":result},"")):result;};}())')()(e)}throw"Invalid JSON: "+e}}}},l=new function(){function e(a){var r=function(){try{return new window.XMLHttpRequest}catch(e){throw"No XMLHttpRequest support"}}(),c={0:200,1223:204},u=!!r&&"withCredentials"in r,l=a.url,d="",g=function(){var i=c[this.status]||this.status,u=!!this.responseText&&this.responseText,l=t(a.url,i);if(200!=i&&204!=i&&304!=i&&!l)return a.attempted?(u=!1,o.error("HttpConnection.xhrRequest.load",{type:a.type,url:a.url.substr(a.url.lastIndexOf("/")),status:i,attempt:2},this,r,s(a.url)),void a.callback(u)):(a.attempted=!0,o.error("HttpConnection.xhrRequest.load",{type:a.type,url:a.url.substr(a.url.lastIndexOf("/")),status:i,attempt:1},this,r,s(a.url)),e(a),void(u=!1));if(!l||u&&""!=u||(u=!1),
a.url.indexOf(n.get("_simpleSyncServicePath_"))>-1||a.url.indexOf(n.get("_ssp"))>-1)try{u=[u,r.getResponseHeader("Date")]}catch(e){return void a.error(e)}o.debug("HttpConnection.xhrRequest",{type:a.type,url:a.url.substr(a.url.lastIndexOf("/")),status:i,attempted:a.attempted,performance:s(a.url)}),a.callback(u)},h=function(e){var t={type:a.type,url:a.url.substr(a.url.lastIndexOf("/")),status:r.status,textStatus:r.textStatus};o.error("HttpConnection.xhrRequest.error",t,e,r,s(a.url)),a.error(t)};if(!u)throw o.error("HttpConnection.xhrRequest.NoCrossDomain",{url:a.url.substr(a.url.lastIndexOf("/"))},"No crossdomain support"),"No crossdomain support";d=f(a.data),/^(GET|HEAD)$/i.test(a.type)&&(l=p(l,a.cache,d)),r.open(a.type,l,!0),0!=a.withCredentials&&(r.withCredentials=a.withCredentials),a.mimeType&&r.overrideMimeType&&r.overrideMimeType(a.mimeType),/^POST$/i.test(a.type)&&r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");for(i in a.headers)r.setRequestHeader(i,a.headers[i]);r.onload=g,r.onerror=h;try{r.send(d&&/^POST$/i.test(a.type)?d:null)}catch(e){throw o.error("HttpConnection.xhrRequest.sendError",{url:a.url.substr(a.url.lastIndexOf("/"))},e),e}}function t(e,t){return(r(e,"_ssp")||r(e,"_srsp"))&&200!=t&&412!=t&&o.error("sync response",{url:e,status:t}),(r(e,"_usp")||r(e,"_srsp"))&&403==t||r(e,"_csp")&&(404==t||0==t)||r(e,"_esp")&&(412==t||0==t)||r(e,"_ssp")&&(412==t||403==t)}function r(e,t){return e.indexOf(n.get(t))>-1}function s(e){var t="null";if("performance"in window&&"getEntriesByType"in performance)for(var r=performance.getEntriesByType("resource"),n=0;n<r.length;n++)if(r[n].name.indexOf(e)>=0){if("toJSON"in r[n])t=r[n].toJSON();else{var i={};for(var s in r[n])/boolean|string|number/.test(typeof r[n][s])&&(i[s]=r[n][s]);t=i}a&&(a.networkTime+=r[n].duration)}return JSON.stringify(t)}function c(t,r){var n="",i=t.url,s=new XDomainRequest,l=null==r||r,d=function(r){if(l){l=!1;var n=parseInt(a.browser.version,10);n>=7&&n<=9?c(t,l):e(t)}else{t.attempted=!0;var i={url:t.url.substr(t.url.lastIndexOf("/")),type:r,attempt:2};o.error("HttpConnection.XDRequest.tryAgain",i),t.error(i)}};n=f(t.data),/^(GET|HEAD)$/i.test(t.type)&&(i=p(i,t.cache,n)),s.open(t.type,i),s.onprogress=function(){},s.onload=function(){var e=!!s.responseText&&s.responseText,a=new u.get("jsonParser"),r=a.parse(e);if(e&&!("_id"in r))return t.attempted?(e=!1,o.error("HttpConnection.XDRequest.load",{url:i.substr(i.lastIndexOf("/")),attempt:2},e),void t.callback(e)):(t.attempted=!0,o.error("HttpConnection.XDRequest.load",{url:i.substr(i.lastIndexOf("/")),attempt:1},e),c(t,l),void(e=!1));o.debug("HttpConnection.XDRequest",{type:t.type,url:i.substr(i.lastIndexOf("/")),attempted:t.attempted}),t.callback(e)},s.ontimeout=function(){o.error("HttpConnection.XDRequest.timeout",{url:i.substr(i.lastIndexOf("/")),attempted:t.attempted}),d("timeout")},s.onerror=function(){o.error("HttpConnection.XDRequest.onerror",{url:i.substr(i.lastIndexOf("/")),attempted:t.attempted}),d("error")},s.timeout=3e3,s.send(n&&/^POST$/i.test(t.type)?n:null)}var l=(new Date).getTime(),d=function(t,r){var n={type:r,url:t.url?t.url:"",data:t.data?t.data:"",callback:"function"==typeof t.callback?t.callback:function(e){},error:"function"==typeof t.error?t.error:function(e){},cache:!!t.cache&&t.cache,ifModified:!!t.ifModified&&t.ifModified,headers:t.headers?t.headers:{},dataType:t.dataType?t.dataType:"html",mimeType:t.mimeType?t.mimeType:"",withCredentials:!("withCredentials"in t)||t.withCredentials};Boolean(a.browser.isIE&&a.browser.nVersion<=9)?c(n):e(n)},f=function(e){var t="";if("object"==typeof e&&e!={}){var a=[];for(var r in e)a.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));t=a.join("&")}else"string"==typeof e&&(t=e);return t},p=function(e,t,a){var r=/([?&])_=[^&]*/,n=function(e){return/\?/.test(e)?"&":"?"};return e+=a?n(e)+a:"",!1===t&&(e=r.test(e)?e.replace(r,"$1_="+l++):e+(n(e)+"_=")+l++),e};this.get=function(e){g(e,"GET")},this.post=function(e){g(e,"POST")},this.head=function(e){g(e,"HEAD")},this.doRequest=function(e){g(e)};var g=function(e,t){try{t=Boolean(t)?t:e.method,d(e,t)}catch(r){var a=e.url?e.url:"NO URL";o.error("HttpConnection."+t,{url:a.substr(a.lastIndexOf("/"))},r)}}},d=function(){var e,t,a;this.getUid=function(){return e},this.setUid=function(t){e=c.trim(String(t))},this.getLastUpdate=function(){return t},this.setLastUpdate=function(e){e&&(t="object"==typeof e?new Date(e.getTime()):"null"==e?"null":isNaN(e)||13!=String(e).length?new Date(parseInt(e,16)):new Date(parseInt(e,10)))},this.getDetectionFlag=function(){return a},this.setDetectionFlag=function(e){a=Boolean(e)},this.setAttributes=function(e){"object"==typeof e?(e.uid&&this.setUid(e.uid),e.lastUpdate&&this.setLastUpdate(e.lastUpdate),e.detectionFlag&&this.setDetectionFlag(e.detectionFlag)):"string"==typeof e&&this.parseString(e)},this.parseString=function(e){if("string"==typeof e){var t=n.get("_cvs"),a=e.split(t);a[0]&&this.setUid(a[0]),a[1]&&this.setLastUpdate(a[1]),a[2]&&this.setDetectionFlag(a[2])}},this.getString=function(){var r=[];return r.push(e?c.trim(e):""),"object"==typeof t&&t?r.push(c.trim(t.getTime().toString(16))):"null"==t&&r.push(c.trim(t)),"boolean"==typeof a&&a&&r.push(String(a)),r.join("|")},this.getLogString=function(){return"UID ("+this.getUid()+"), LastUpdate ("+this.getLastUpdate().toString()+")"}},f=new function(){this.DeviceId=new function(){var e=new u.get("jsonParser"),r=function(t){var r=a.appUrl+n.get("_usp");l.post({url:r,cache:!1,data:t.data,dataType:"text",callback:function(a){if(a&&"string"==typeof a){var r=e.parse(a);if("_id"in r&&"lastUpdate"in r){var n=new d;n.setAttributes({uid:r._id,lastUpdate:r.lastUpdate?r.lastUpdate:"null"}),i(n.getString()),o.debug("callService",{Server_response:a}),t.callBack(n)}else i(null),o.debug("callService",{"Server_response (invalid json)":a}),t.callBack(!1)}else i(null),o.debug("callService",{"Server_response (304 or invalid response)":a}),t.callBack(!1)},error:function(e){i(null),o.error("callService",e),t.callBack(!1)}})};this.create=function(e){r({data:s(e),callBack:e.callback})},this.update=function(e){o.debug("Services.DeviceId.update","Updating device data, actual data: "+e.data.getLogString()),r({data:s(e),callBack:e.callback})};var i=function(e){"test"!=n.get("_sc")&&t.persistUid(e,a.id)},s=function(e){var t="";try{var a,r=function(e){return c.toHtmlEntities(c.trim(String(e)))},n=function(e){return e=r(e),e=e.replace(/\./g,""),e=e.replace(/\//g,""),e=e.replace(/\\/g,"")},i=function(e,t){return'{"'+n(e)+'": "'+r(t)+'"}'},s=function(e,t){var a=[];for(var i in t)a.push('{"'+n(i)+'": "'+r(t[i])+'"}');return a=a.join(", "),'{"'+e+'": ['+a+"]}"},u=function(e,t){var a=[];for(var n in t)a[n]='"'+r(t[n])+'"';return a=a.join(", "),'{"'+e+'": ['+a+"]}"},l=function(e){return'{"'+r(e)+'": null}'},d=function(e){var t=!1;if("object"==typeof e)for(var a in e)if(e[a]){t=!0;break}return t},f=function(e){var t=!1;if("object"==typeof e)for(var a in e){t=!0;break}return t},p=null;if("object"==typeof e.detections){var g=[],h="";for(var v in e.detections){if("special"===v){for(var m in e.detections[v]){var y=e.detections[v][m],b=!1;y.timeout?b=l(m):"boolean"==y.type&&"boolean"==typeof y.value?b=i(m,String(y.value)):"string"==y.type&&"string"==typeof y.value?b=i(m,y.value):"array"==y.type&&"object"==typeof y.value&&d(y.value)?b=u(m,y.value):"json"==y.type&&"object"==typeof y.value&&f(y.value)&&(b=s(m,y.value)),b&&(h+=b),h=h.replace(/^\{/,""),h=h.replace(/\}$/,""),h=h.replace(/"(\d)/,'["$1'),h=h.replace(/(\d)"/,'$1"]')}p=h}var w=e.detections[v],D=!1;w.timeout?D=l(v):"boolean"==w.type&&"boolean"==typeof w.value?D=i(v,String(w.value)):"string"==w.type&&"string"==typeof w.value?D=i(v,w.value):"array"==w.type&&"object"==typeof w.value&&d(w.value)?D=u(v,w.value):"json"==w.type&&"object"==typeof w.value&&f(w.value)&&(D=s(v,w.value)),D&&g.push(D)}a=String("[ "+g.join(", ")+" ]")}else a="false",p="";var S="object"==typeof e.data&&e.data.getUid(),C=Boolean(S)?'"_id":"'+S+'", ':"",_='"sess":"'+e.sess+'", ',k='"elapsedTime":"'+o.getTime()+'", ',x=o.getTime("detectionTime"),E=x?'"detectionTime":"'+x+'", ':"",T='"attributes": '+a+(p?", ":""),A=p;t="{"+C+_+k+E+T+A+"}",o.debug("Services.DeviceId.parseData","Device Data ( "+k+E+T+A+")")}catch(e){o.error("Services.DeviceId.parseData",e)}return t}},this.Persistence=new function(){this.etagRequest=function(e){var t=a.appUrl+n.get("_esp"),r={url:t,cache:!0,dataType:"text",headers:{},callback:!!e.callback&&e.callback,error:!!e.error&&e.error};"etag"in e&&(r.headers["If-None-Match"]=e.etag),l.get(r)},this.serverRequest=function(e){var t=a.appUrl+n.get("_csp");l.get({url:t,cache:!1,dataType:"text",callback:e.callback,error:e.error})},this.imageRequest=function(e){var t=a.appUrl+n.get("_imageServicePath_"),r=new Image;try{e&&(r.crossOrigin=""),r.src=String(t)}catch(e){o.error("Services.Persistence.imageRequest",e)}return r}},this.simpleRequest=function(e){var t=a.appUrl+n.get("_srsp");l.get({url:t+"?id="+e.uid+"&sess="+e.sess+"&elapsedTime="+o.getTime(),cache:!1,dataType:"text",callback:function(t){o.debug("Services.simpleRequest",[{Server_response:t}]),"function"==typeof e.callBack&&e.callBack(t)},error:function(t){o.error("Services.simpleRequest",t),"function"==typeof e.callBack&&e.callBack(!1)}})},this.simpleSync=function(e){var t=a.appUrl+n.get("_simpleSyncServicePath_"),r={url:t,cache:!1,dataType:"text",withCredentials:!1,callback:e.callback,error:e.error};l.head(r)},this.sync=function(e){var t="sess"in e?"?token="+e.sess:"",r=a.appUrl+n.get("_ssp")+"/"+e.uid+t,i={url:r,cache:!1,dataType:"text",withCredentials:!1,callback:e.callback,error:e.error};l.get(i)}},p=function(){var e=n.get("_ak"),i={scope:function(){var e=!1;if("default"==n.get("_sc")||"persist"==n.get("_sc"))try{e=Boolean(t)}catch(e){o.debug("Tricks","scope support",e)}return e},cookie:function(){var e=!1;try{e="undefined"!=document.cookie}catch(e){o.debug("Tricks","cookie support",e)}return e},window:function(){var e=!1;try{e=void 0!==window.name}catch(e){o.debug("Tricks","window support",e)}return e},session:function(){var e=!1;try{e=!!window.sessionStorage}catch(e){/SecurityError/i.test(e)?o.warning("Tricks","session SecurityError",e):o.debug("Tricks","session support",e)}return e},global:function(){var e=!1;try{e=!!window.globalStorage}catch(e){o.debug("Tricks","global support",e)}return e},local:function(){var e=!1;try{e="localStorage"in window}catch(e){/SecurityError/i.test(e)?o.debug("Tricks","localStorage SecurityError",e):o.debug("Tricks","localStorage support",e)}return e},user:function(){var e=!1;try{e=void 0!==c.getHtmlWrapper().style.behavior}catch(e){o.debug("Tricks","user support",e)}return e},server:function(){var e=!1;try{e=!a.browser.isIE}catch(e){o.debug("Tricks","server support",e)}return e},etag:function(){var e=!1;try{e=!a.browser.isIE}catch(e){o.debug("Tricks","etag support",e)}return e},database:function(){var e=!1;try{e="openDatabase"in window}catch(e){o.debug("Tricks","database support",e)}return e},swf:function(){var e=!1;try{e=c.flashSupport()}catch(e){o.debug("Tricks","swf support",e)}return e},sl:function(){var e=!1;try{e=a.browser.isIE?Boolean(new ActiveXObject("AgControl.AgControl")):!a.browser.isFirefox&&!a.browser.isMozilla&&(!(a.browser.isChrome&&parseInt(a.browser.version,10)>=42)&&(!(a.browser.isOpera&&parseInt(a.browser.version,10)>=25)&&Boolean(navigator.plugins["Silverlight Plug-In"])))}catch(e){o.debug("Tricks","silverLight support",e)}return e},base64:function(){var e=!1;return a.browser.isIE&&parseInt(a.browser.version,10)>=11||!a.browser.isIE?e=!0:o.debug("Tricks","base64 support","old IE"),e},appcache:function(){var e=!1;return"applicationCache"in window&&"XMLHttpRequest"in window&&"postMessage"in window?e=!0:o.debug("Tricks","appcache support","isn't html5 browser"),e},filesystem:function(){var e=!1;return"webkitRequestFileSystem"in window||"requestFileSystem"in window?e=!0:o.debug("Tricks","filesystem support","no filesystem support"),e}};this.config={scope:{isDefault:!0,async:!1,className:"ScopeData",supported:i.scope,isRequest:!1},cookie:{isDefault:!0,async:!1,className:"CookieData",supported:i.cookie,isRequest:!1},window:{isDefault:!0,async:!1,className:"WindowData",supported:i.window,isRequest:!1},session:{isDefault:!0,async:!1,className:"SessionData",supported:i.session,isRequest:!1},global:{isDefault:!0,async:!1,className:"GlobalData",supported:i.global,isRequest:!1},local:{isDefault:!0,async:!1,className:"LocalData",supported:i.local,isRequest:!1},user:{isDefault:!0,async:!1,className:"UserData",supported:i.user,isRequest:!1},server:{isDefault:!0,async:!0,className:"ServerData",supported:i.server,isRequest:!0},etag:{isDefault:!0,async:!0,className:"EtagData",supported:i.etag,isRequest:!0},database:{isDefault:!0,async:!0,className:"DatabaseData",supported:i.database,isRequest:!1},swf:{isDefault:!0,async:!0,className:"SwfData",supported:i.swf,isRequest:!0},sl:{isDefault:!0,async:!0,className:"SilverLightData",supported:i.sl,isRequest:!0}},this.ScopeData=function(){this.set=function(e){try{a.parent.uid=e,o.debug("set.ScopeData","Setting value ("+e+")")}catch(e){o.error("set.ScopeData",e)}},this.get=function(){var e;try{e="parent"in a&&null!=a.parent?a.parent.uid:null,o.debug("get.ScopeData","Value: "+e)}catch(e){o.error("get.ScopeData",e)}return this.cacheValue(this,e)}},this.CookieData=function(){this.set=function(t){try{document.cookie=e+"=; expires=Mon, 20 Sep 2010 00:00:00 UTC; path=/",document.cookie=e+"="+t+"; expires=Tue, 31 Dec 2030 00:00:00 UTC; path=/",o.debug("set.CookieData","Setting value ("+t+")")}catch(e){o.error("set.CookieData",e)}},this.get=function(){var t;try{t=c.getCookie(document.cookie,e),o.debug("get.CookieData","Value: "+t)}catch(e){o.error("get.CookieData",e)}return this.cacheValue(this,t)}},this.WindowData=function(){this.set=function(t){try{window.name=c.setUrlParameter(window.name,e,t),o.debug("set.WindowData","Setting value ("+t+")")}catch(e){o.error("set.WindowData",e)}},this.get=function(){var t;try{t=c.getUrlParameter(window.name,e),o.debug("get.WindowData","Value: "+t)}catch(e){o.error("get.WindowData",e)}return this.cacheValue(this,t)}},this.SessionData=function(){this.set=function(t){try{sessionStorage.setItem(e,t),o.debug("set.SessionData","Setting value ("+t+")")}catch(e){/QuotaExceededError|QUOTA_EXCEEDED_ERR/i.test(e.toString())?o.warning("set.SessionData",e):o.error("set.SessionData",e)}},this.get=function(){var t;try{t=sessionStorage.getItem(e),o.debug("get.SessionData","Value: "+t)}catch(e){o.error("get.SessionData",e)}return this.cacheValue(this,t)}},this.GlobalData=function(){var t;this.init=function(){try{t=window.document.location.host,0==t.indexOf("www.")&&(t=t.replace("www.",""))}catch(e){o.error("init.GlobalData",e)}},this.set=function(a){try{window.globalStorage[t][e]=a,o.debug("set.GlobalData","Setting value ("+a+")")}catch(e){o.error("set.GlobalData",e)}},this.get=function(){var a;try{a=c.trim(window.globalStorage[t][e]),a=a||!1,o.debug("get.GlobalData","Value: "+a)}catch(e){o.error("get.GlobalData",e)}return this.cacheValue(this,a)}},this.LocalData=function(){this.set=function(t){try{window.localStorage.setItem(e,t),o.debug("set.LocalData","Setting value ("+t+")")}catch(e){/QuotaExceededError/i.test(e.toString())?o.warning("set.LocalData","QuotaExceededError",e):o.warning("set.LocalData",e)}},this.get=function(){var t;try{t=window.localStorage.getItem(e),o.debug("get.LocalData","Value: "+t)}catch(e){o.warning("get.LocalData",e)}return this.cacheValue(this,t)}},this.UserData=function(){this.init=function(){c.createHtmlElement("div",{html:"dnauol",id:"dnauol-userdata"}).style.behavior="url(#default#userData)"},this.set=function(t){try{var a=document.getElementById("dnauol-userdata");a.setAttribute(e,t),a.save(e),o.debug("set.UserData","Setting value ("+t+")")}catch(e){o.error("set.UserData",e)}},this.get=function(){var t;try{var a=document.getElementById("dnauol-userdata");a.load(e),t=a.getAttribute(e),o.debug("get.UserData","Value: "+t)}catch(e){t=!1,o.error("get.UserData",e)}return this.cacheValue(this,t)}},this.ServerData=function(){var e=!1,t=!1;this.init=function(){try{f.Persistence.serverRequest({callback:function(a){t=a,e=!0},error:function(a){t=!1,e=!0,o.debug("post.ServerData",a)}})}catch(e){o.error("init.ServerData",e)}},this.set=function(e){try{o.debug("set.ServerData","Setting value ("+e+")")}catch(e){o.error("set.ServerData",e)}},this.get=function(){var e=t;return o.debug("get.ServerData","Value: "+e),this.cacheValue(this,e)},this.isReady=function(){return e}},this.EtagData=function(){var e=!1,t=!1;this.init=function(){try{f.Persistence.etagRequest({callback:function(a){t=a,e=!0},error:function(a){t=!1,e=!0,o.debug("post.EtagData",a)}})}catch(e){o.error("init.EtagData",e)}},this.set=function(e){try{f.Persistence.etagRequest({etag:e}),o.debug("set.EtagData","Setting value ("+e+")")}catch(e){o.error("set.EtagData",e)}},this.get=function(){var e=t;return o.debug("get.EtagData","Value: "+e),this.cacheValue(this,e)},this.isReady=function(){return e}},this.DatabaseData=function(){function t(){var t;try{t=window.openDatabase(e,"",e,1024)}catch(a){try{handler=new Function('(function(){try{return [window.openDatabase("'+e+'","","'+e+'",1024)];}catch(e){return [false,e];}})();')(),null==handle?(t=!1,o.warning("DatabaseData.init_fallback fail","nothing return")):handler[0]?(t=handler[0],o.warning("DatabaseData.init_openDatabase","fallback ok")):(t=!1,o.warning("DatabaseData.init_fallback fail",handler[1]))}catch(e){t=!1,o.warning("DatabaseData.init_fallback fail",e)}}return t}var a=!1,i={handler:null,tableName:"dnauol",value:"",queries:[]};i.queries.create=function(e){var t=[];t[t.length]="CREATE TABLE IF NOT EXISTS "+i.tableName+" (",t[t.length]="id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, ",t[t.length]="name TEXT NOT NULL, value TEXT NOT NULL, UNIQUE (name) )",t=t.join("");var a=function(e,t){o.warning("DatabaseData.create_success","")},r=function(e,t){o.error("DatabaseData.create_error",JSON.stringify(t))};e.executeSql(t,[],a,r)},i.queries.update=function(t,a){var r="INSERT OR REPLACE INTO "+i.tableName+" (name, value) VALUES(?, ?)",n=[e,a],s=function(e,t){o.debug("DatabaseData.set","Setting value ("+a+")"),o.warning("DatabaseData.update_success","")},c=function(e,t){o.error("DatabaseData.update_error",JSON.stringify(t))};t.executeSql(r,n,s,c)},i.queries.select=function(t){var r="SELECT value FROM "+i.tableName+" WHERE name=?",n=[e],s=function(e,t){t.rows.length>=1&&(i.value=t.rows.item(0).value),a=!0},c=function(e,t){a=!0,o.warning("DatabaseData.select_error",JSON.stringify(t))};t.executeSql(r,n,s,c)};var s=function(){try{i.handler.transaction(function(e){i.queries.select(e)})}catch(e){o.error("init.DatabaseData_transaction",e)}};this.init=function(){setTimeout(function(){i.handler=t()},1),r.async("database.init__nolog",function(e){i.handler&&(e.clear(),s()),e.lastCall&&e.clear()},n.get("_ai"),n.get("_maa"))},this.set=function(e){if(i.handler||(i.handler=t()),i.handler)try{i.handler.transaction(function(t){i.queries.create(t),i.queries.update(t,e)})}catch(e){o.error("set.DatabaseData",e)}},this.get=function(){var e=i.value;return this.cacheValue(this,e)},this.isReady=function(){return a}},this.SwfData=function(){var e=!1,t=!1;this.init=function(){a.swfLib||(a.swfLib=u.get("swf"),r.async("swfObject__nolog",function(e){s.swfobject&&s.swfobject.hasFlashPlayerVersion("9")&&(a.swfLib.create(),e.detectionReady=!0,e.clear()),e.maxCalls==e.actualCall+1&&(e.detectionReady=!0,e.clear())},n.get("_ai"),n.get("_maa")))},this.set=function(e){try{a.swfLib.handler&&"function"==typeof a.swfLib.handler.setDNA?(a.swfLib.handler.setDNA(e),o.debug("set.SwfData","Setting value ("+e+")")):o.warning("set.SwfData","swfHandler.setDNA is not a function")}catch(e){o.error("set.SwfData",e)}},this.get=function(){return o.debug("get.SwfData","Value: "+e),this.cacheValue(this,e)},this.isReady=function(){try{if(s.swfobject)if(s.swfobject.hasFlashPlayerVersion("9")){if(a.swfLib.createHandler()&&"function"==typeof a.swfLib.handler.getDNA){t=!0;var r=a.swfLib.handler.getDNA();e=!!Boolean(r)&&r}}else t=!0}catch(e){o.error("isReady.SwfData",e)}return t}},this.SilverLightData=function(){var e,t=!1,r=function(e){var t=a.appUrl+"/resource/dna.xap",r=void 0!==e?'<param name="initParams" value="'+a.browser.alias+"="+e+'" />':"",n=void 0!==e?"dnauol-silverlight-set":"dnauol-silverlight-get",i="string"!=typeof e?'<param name="onLoad"  value="onDnaUOLSlLoad" />':"",s="string"!=typeof e?'<param name="onError" value="onDnaUOLSlError" />':"",o=[];o.push('<div style="width:1px;height:1px;overflow:hidden;position:absolute;top:-9999px;left:-9999px;">'),o.push("<object id="+n+' width="100%" height="100%" type="application/x-silverlight-2" data="data:application/x-silverlight-2," >'),o.push(r),o.push('<param name="source" value="'+t+'" />'),o.push('<param name="enableHtmlAccess" value="true" />'),o.push(i+s),o.push('<param name="background" value="Transparent" />'),o.push('<param name="windowless" value="true" />'),o.push('<param name="minRuntimeVersion" value="4.0.50826.0" />'),o.push('<param name="autoUpgrade" value="false" />'),o.push("</object></div>"),o=o.join(""),c.removeHtmlElement(n+"-wrapper"),c.createHtmlElement("div",{id:n+"-wrapper"}).innerHTML=o};this.init=function(){try{window.onDnaUOLSlLoad=function(r,n){var i=document.getElementById("dnauol-silverlight-get");if(i)try{a.controlSilverLight=i.Content.App.getIsolatedStorage(a.browser.alias),e=a.controlSilverLight}catch(e){o.debug("SilverLightData.onDnaUOLSlLoad",e),a.controlSilverLight=!1}else o.debug("SilverLightData.onDnaUOLSlLoad","Cant use silverlight control handler");t=!0},window.onDnaUOLSlError=function(e,r){a.controlSilverLight=!1,t=!0},window.dbg=function(e){},r()}catch(e){o.error("init.SilverLightData",e)}},this.get=function(){return this.cacheValue(this,e)},this.set=function(e){try{r(e),o.debug("set.SilverLightData","Setting value ("+e+")")}catch(e){o.error("set.SilverLightData",e)}},this.isReady=function(){return t}},this.Base64Data=function(){var e=!1,t=null,r=function(e){l.get({url:a.appUrl+n.get("_bsp"),cache:!0,mimeType:"text/css",dataType:"text",headers:e?{"X-Request-Uid":e}:{},callback:function(t){if(e)o.debug("set.Base64Data","Setting value ("+e+")");else{var a;try{a=t.match(/url\(([\S\s]+)?\)/)[1].replace(/\n/g,"").replace(/\r/g,"")}catch(e){return void o.debug("Base64Data.onLoad","Couldn't do response parse")}try{i(a)}catch(e){o.warning("Base64Data.base64ToText",e)}}},error:function(e){o.warning("Base64Data.base64ToText","request error "+e)}})},i=function(a){var r="",n=new Image;n.style.visibility="hidden",n.style.position="absolute",n.src=a,n.onerror=function(e){throw"base64 image onerror"},n.onload=function(){try{r="";var a=document.createElement("canvas");a.width=n.width,a.height=1;var i=a.getContext("2d");i.drawImage(n,0,0);for(var s=i.getImageData(0,0,200,1),o=s.data,c=0,u=o.length;c<u&&0!=o[c]&&(r+=String.fromCharCode(o[c]),0!=o[c+1])&&(r+=String.fromCharCode(o[c+1]),0!=o[c+2]);c+=4)r+=String.fromCharCode(o[c+2]);""!=r&&(t=r),e=!0}catch(e){throw"error on pixel reading "+e}}};this.init=function(){r()},this.get=function(){return this.cacheValue(this,t)},this.set=function(e){try{r(e)}catch(e){o.error("set.Base64Data",e)}},this.isReady=function(){return e}},this.AppcacheData=function(){var e=null,t=!1,r=a.appUrl+n.get("_acsp"),i="origin"in location?location.origin:location.protocol+"//"+location.hostname,s=function(a){/^https*:\/\/[\w\.]+?\.uol\.com\.br$/i.test(a.origin)&&/^get:.*$/i.test(a.data)&&(/^get:\w+\|\w+|\w+$/.test(a.data)&&"get:cached"!=a.data&&"get:null"!=a.data&&(e=a.data.split(":")[1]),t=!0)},c=function(e){var t=document.getElementById(e);t&&document.body.removeChild(t)};this.init=function(){var e=document.createElement("iframe");e.id="dna_iframeGet",e.style.display="none",e.src=r+"#get_"+encodeURIComponent(i),document.body.appendChild(e),window.addEventListener("message",s,!1)},this.get=function(){c("dna_iframeGet"),window.removeEventListener("message",s);var t=e;return o.debug("appcache.get","Value: "+t),this.cacheValue(this,t)},this.set=function(e){c("dna_iframeGet");var t=document.createElement("iframe");t.id="dna_iframeSet",t.style.display="none",t.src=r+"#set_"+encodeURIComponent(i)+"_"+e,document.body.appendChild(t),setTimeout(function(){c("dna_iframeSet")},2e3)},this.isReady=function(){return t}},this.FilesystemData=function(){function e(e){/^http[s]*:\/\/[\w\.]+\.uol\.com\.br\//i.test(e.origin)&&/^get:[\w\|]+$/.test(e.data)&&(/get:\w+\|\w+\|\w+/.test(e.data)&&"get:null"!=e.data&&(t=e.data.split(":")[1]),r=!0)}var t=null,r=!1,i=a.appUrl+n.get("_fssp"),s="origin"in location?location.origin:location.protocol+"//"+location.hostname,c=function(e,t){var a=document.getElementById(e);a&&document.body.removeChild(a),t&&window.removeEventListener("message",t,!1)};this.init=function(){var t=document.createElement("iframe");t.id="dna_iframeFSGet",t.style.display="none",t.src=i+"#get_"+encodeURIComponent(s),document.body.appendChild(t),window.addEventListener("message",e,!1)},this.get=function(){var e=t;return o.debug("get.filesystem","Value: "+e),this.cacheValue(this,e)},this.set=function(t){c("dna_iframeFSGet",e);var a=document.createElement("iframe");a.id="dna_iframeFSSet",a.style.display="none",a.onload=function(){setTimeout(function(){c("dna_iframeFSSet")},2e3)},a.src=i+"#set_"+t,document.body.appendChild(a)},this.isReady=function(){return r&&c("dna_iframeFSGet",e),r}}},g=new function(){var t=new p,i=new function(){this.asyncInterval=n.get("_ai"),this.maxAsyncAttempts=n.get("_maa"),this.createTrick=function(e){var a,r=t.config[e];return r.supported()?(a=new t[r.className],a.ready=!1,a.cacheValue=function(e,t){var a=!1;if("string"==typeof t){var r=c.trim(t);/^[a-z0-9]{32}\|[a-z0-9]*\|(true|false)$/i.test(r)&&(t=r,a=new d,a.setAttributes(t))}e.cache=a}):(a={},a.unsupported=!0,a.ready=!0,o.debug("createTrick",{trick:e+" [UNSUPPORTED]"})),a.className=r.className,a.isRequest=r.isRequest,a.cache=!1,a.timeout=!1,a},this.getTrickValue=function(e){return e.cache},this.factory=function(e){var a=[],e="object"==typeof e?e:{};o.debug("+STEP_1"),o.debug("+Persistence.TricksHelper");for(var r in t.config)try{this.trickFilter(e[r],t.config[r].isDefault)?a[r]=this.createTrick(r):o.debug("factory",{trick:r+" [UNUSED]"})}catch(e){o.error("factory",{trick:r},e)}return a},this.trickFilter=function(e,t){var a=!1;return"boolean"==typeof e?a=e:void 0===e&&t?a=!0:void 0!==e||t||(a=!1),a},this.checkAsyncTrick=function(e,t,a){return r.async("checkAsyncTrick__nolog",function(a){var r=e.tricks[t];if(r.asyncCheck=r.asyncCheck+1||0,r.isReady())return r.get(),r.ready=!0,a.clear(),void o.debug("checkAsyncTrick",{trick:t,attempt:r.asyncCheck});a.lastCall&&(r.timeout=!0,r.ready=!0,o.debug("checkAsyncTrick",{trick:t+" [TIMEOUT]"}),a.clear())},n.get("_ai"),n.get("_maa"))},this.isAllTricksReady=function(e,t){return r.async("isAllTricksReady__nolog",function(a){var r=!0;for(var n in e.tricks)e.tricks[n].ready||(r=!1);r&&(a.clear(),t())},n.get("_ai"))},this.getSummary=function(e){var t=[];try{for(var r in e.tricks){var n=this.getTrickValue(e.tricks[r]);"object"==typeof n?t[r]=n.getUid():e.tricks[r].unsupported?t[r]=!1:t[r]=null}}catch(e){a.error("getSummary",e)}return t},this.persistData=function(e,t,a,r){i.fillTricks(e,t,a),r(i.getSummary(e))},this.fillTricks=function(e,t,a){var r=t.getString();if(r){o.debug("fillTricks",{value:r});for(var n in e.tricks)if(!e.tricks[n].unsupported){var i=!a||!e.tricks[n].isRequest;i&&e.tricks[n].set(r)}}else o.debug("fillTricks","Value not set")}},s=function(s,c){var u=[],l=!1,d=!1,f=function(){if(!l){var e=s.tricks.scope.get();e&&(l=e,o.debug("PersistedData.tryAsyncTricks",{index:"scope [FIRST]"}))}d?o.debug("-Persistence.TricksHelper"):(d=!0,"object"==typeof l?o.debug("PersistedData.getPersistedData",{value:l.getLogString()}):o.debug("PersistedData.getPersistedData","No persistent data found"),o.debug("-Persistence.TricksHelper"),c(l))},p=function(){try{for(var e in s.tricks){if(s.tricks[e].get)if(t.config[e].async)u.push(e);else{"function"!=typeof s.tricks[e].init||s.tricks[e].ready||s.tricks[e].init(),s.tricks[e].ready=!0,s.tricks[e].get();var r=i.getTrickValue(s.tricks[e]);r&&(l=r,"parent"in a&&null!=a.parent&&(a.parent.uid=r.getString()),o.debug("PersistedData.trySyncTricks",{index:e+" [FIRST]"}))}if(l)break}}catch(e){o.error("PersistedData.trySyncTricks",e)}return l},g=function(){return r.async("tryAsyncTricks__nolog",function(t){var r,n,c=!0;t.error[t.actualCall]&&(o.error("PersistedData.tryAsyncTricks",e),f());for(var d in u)r=u[d],s.tricks[r].ready||s.tricks[r].timeout?(n=i.getTrickValue(s.tricks[r]))&&(l=n,"parent"in a&&null!=a.parent&&(a.parent.uid=n.getString()),o.debug("PersistedData.tryAsyncTricks",{index:r+" [FIRST]"})):c=!1;(l||c)&&(f(),t.clear())},n.get("_ai"))},h=function(){try{o.debug("prepareAsyncTricks","started");for(var e in u)!function(e){setTimeout(function(){var t=u[e];s.tricks[t].get&&(s.tricks[t].ready=!1,"function"==typeof s.tricks[t].init&&s.tricks[t].init(),i.checkAsyncTrick(s,t))},0)}(e);g()}catch(e){o.error("startAsyncTricks",e),f()}};this.get=function(){p()?f():h()}};this.handler=function(e){var t={};return t.tricks=i.factory(e),t.getPersistedData=function(e){new s(t,e).get()},t.persistData=function(e,a,r){i.persistData(t,e,a,r)},t.checkPersistedData=function(e){return i.createTrick("scope").get()},t}};this.Main=new function(){function e(e,t){function i(i){function l(e){b?(o.debug("doUpdate",{UID:i.getUid(),lastUpdate:i.getLastUpdate().toString()}),o.debug("+doUpdate"),f.DeviceId.update({sess:s,data:i,detections:e,callback:d}),o.debug("-doUpdate")):(o.debug("doUpdate",{UID:"Creating..."}),o.debug("+doUpdate"),f.DeviceId.create({sess:s,detections:e,callback:d}),o.debug("-doUpdate"))}function d(t){t?(e.register("update",t,"Get value to persist from service callback"),p(t,!1,"Data persisted")):(e.register("doNotUpdate","Not modified"),p(i,!0,"Data re-persisted"))}function p(t,a,r){t?(t.setDetectionFlag(m),c.persistData(t,a,function(a){e.register("summary",a,r),g(t)})):g(!1)}function g(a){e.finalize(t.callback,a)}var h=!(!i||/^[0-9a-fA-F]{32}$/.test(i.getUid())),v=!!Boolean(t.forceUpdate)||h,m=!("detectDeviceData"in t)||t.detectDeviceData,y=!0,b=!1,w=!1,D=!1;"object"==typeof i&&i&&(y=e.hasExpired(i.getLastUpdate(),t.updateFrequency),b=Boolean(i.getUid()),w="null"!=i.getLastUpdate()&&!isNaN(i.getLastUpdate().valueOf()),D=Boolean(i.getDetectionFlag()));var S=Boolean(!b||m&&!w||v||y||m&&!D);if(o.debug("updateNeeded",{noHasUid:!b,detectAndNoHasLastUpdate:m&&!w,forceUpdate:v,expired:y,detectAndNoHasDetectionFlag:m&&!D,updateNeeded:S}),m&&S){var C="object"==typeof t.addDetections&&t.addDetections,_=new DeviceData(C);_.get(function(r){if(e.register("detections",r,"Device data detection done"),a.browser.isIE&&a.browser.nVersion<=9)l(r);else if(n.get("_ics")){var s=!!b&&i.getUid();k(s,t.sess,r)}else l(r)}),_=null}else S?l(!1):function(t){var a=i.getUid();o.debug("doNotUpdate",{UID:a,lastUpdate:i.getLastUpdate().toString()}),o.debug("+doNotUpdate"),t&&f.simpleRequest({uid:a,sess:s}),o.debug("-doNotUpdate"),e.register("doNotUpdate",i,"Nothing to do"),p(i,!0,"Data re-persisted")}(m);var k=function(e,t,a){!1===e?f.simpleSync({callback:function(e){x(e[0],e[1],a)},error:function(e){x(!1,!1,a),o.error("SimpleSync",e)}}):f.sync({uid:e,sess:t,callback:function(e){var t=!1;try{t=new u.get("jsonParser").parse(e[0]),"specs"in t?x(t.specs,e[1],a):(o.warning("Sync","empty response"),x(!1,e[1],a))}catch(t){
/^Fal.*rp$/.test(e[0])?o.warning("Sync parse",t,e):o.error("Sync parse",t,e),x(!1,e[1],a)}},error:function(e){o.error("Sync",e),x(!1,!1,a)}})},x=function(t,a,i){o.startTimer("detectionTime");var s=!1,c=!1,u=new Detections,d=u.get("getBase64ImageCanvas");d.init(new Date(a).getTime());var f=u.get("optionalImageCanvas");return f.init(t),r.async("ics__nolog",function(t){if(!s&&d.isAvailable()&&(s=!0,i.getBase64ImageCanvas={timeout:!1,type:d.type,value:d.get()}),!c&&f.isAvailable()&&(c=!0,i.optionalImageCanvas={timeout:!1,type:f.type,value:f.get()}),s&&c||t.lastCall){var a;return t.lastCall?(a="sync error",o.error("sync error",{timestampName:s,optionalName:c})):(t.clear(),a="sync done"),u=null,e.register("sync",i,a),void l(i)}},n.get("_ai"),n.get("_maa"))}}var s="string"==typeof t.sess?t.sess:"",c=new g.handler(t.filter);c.getPersistedData(function(t){if(!t){var a=c.checkPersistedData("scope");a&&(t=a)}e.register("persisted",t,"Get persisted data"),i(t)})}function i(){function e(){var e={uid:!1,lastUpdate:!1,updated:!1};try{i.update?(e.uid=i.update.getUid(),e.lastUpdate=i.update.getLastUpdate(),e.updated=!!i.summary,s.updateData=!!i.summary&&i.summary):i.persisted&&(e.uid=i.persisted.getUid(),e.lastUpdate=i.persisted.getLastUpdate(),s.updateData=!1);r(o.getData())}catch(e){o.debug("+StepsHelper"),o.error("getResult",e),o.debug("-StepsHelper")}return e}function r(e){if(s.logResult&&"object"==typeof s.logResult)s.logResult.push(e);else if(s.logResult&&"string"==typeof s.logResult){var t=s.logResult;s.logResult=[t,e]}else s.logResult=e}var i={},u=1,l=new Date;n.get("environment");this.register=function(e,t,a){try{i[e]=t;var r=o.getNow(),n=r-l;l=r,o.debug("register",{step:u+" "+a,elapsedTime:n,time:o.getNowDate()})}catch(e){o.error("register",e)}o.debug("-STEP_"+u),u++,o.debug("+STEP_"+u)},this.hasExpired=function(e,t){var a=!1;o.debug("+StepsHelper");try{if("object"==typeof e&&e){var r,i,s,c,u=parseInt(Math.round(t),10);!isNaN(u)&&u<=n.get("_muf")?(r=u,o.debug("updateFrequency",{updateFrequency:r,param:t})):(r=n.get("_uf"),o.debug("updateFrequency",{updateFrequencyDefault:r,param:t})),i=24*parseInt(r)*60*60*1e3,s=new Date(e.getTime()+i),c=new Date,a=Boolean(s.getTime()<=c.getTime())}}catch(e){o.error("updateFrequency",e)}return o.debug("hasExpired",a),o.debug("-StepsHelper"),a},this.finalize=function(r,n){setTimeout(function(){c.removeHtmlWrapper()},1e3);var i=o.getTime();i>=2e4&&o.error("Extreme_time_elapsed",i),o.commit(n),t.changeStatus("finalized",a.id),"function"==typeof r&&r(e())}}function l(t,a){var r=new i;t?e(r,a):(o.error("init","Dependencies load timeout"+("readyState"in document?" readyState: "+document.readyState:"")),r.finalize(a.callback,null))}function d(e,t){var a=(n.get("_ai"),n.get("_maa"),!1),i=function(){if(a||"readyState"in document&&("complete"==document.readyState||"interactive"==document.readyState)){var e="{onload: "+a+("readyState"in document?", readyState: "+document.readyState:"")+"}";return o.debug("init","Dependencies loaded, ",e),!0}return!1},s=function(){var e="addEventListener"in window?"addEventListener":"attachEvent",t="attachEvent"==e?"on":"";window[e](t+"load",function(){a=!0},!1)},c=function(){e(!0)},u=function(){e(!1)},l=function(){return r.async("waitUntilPrepared__nolog",function(e){return i()?(e.clear(),o.debug("init","wait until prepared: is prepared"),c()):e.lastCall?u():void 0},3*n.get("_ai"),n.get("_maa"))};!function(){i()?c():(o.debug("init","Dependencies are NOT prepared"),s(),l())}()}var p=function(e){e="object"==typeof e?e:{},e.appDomain&&(a._ad=e._ad),(!1===e.ssl||a.browser.isIE&&"http:"==location.protocol)&&(a._ap="http://"),a.appUrl=a._ap+a._ad;var t=n.get("_ll");if("logLevel"in e&&e.logLevel.constructor===Array){for(var r=!0,i=0;i<e.logLevel.length;i++)/^[a-z]+$/.test(e.logLevel[i])||(r=!1);r&&(t=e.logLevel)}return o.begin(t),n.get("_op")&&(e.detectDeviceData=!1),e};!function(){a.browser=c.getBrowser()}();this.run=function(e,t){o.startTimer(),a.id=t,s.browser=a.browser;var r=p(e);o.debug("+Main"),o.debug("clientOptions",r),d(function(e){l(e,r)},r.detectDeviceData)}}};t.prototype.addClosure=function(e){var r,n;if(0==t.closure.length||a()){var i=t.closure.length;r=t.instantiate(e,i),n="initiated"}else r=null,n="standby";var i=t.closure.length;t.closure.push({instance:r,options:e,status:n,id:i})},t.prototype.persistUid=function(e,a){"string"==typeof e?(""!=t.uid&&(t.uid=e),t.closure[a].status="hasUid"):t.closure[a].status="noHasUid",r()},t.prototype.instantiate=function(e,t){return instance=new n,setTimeout(function(){instance.Main.run(e,t)},0),instance},t.prototype.changeStatus=function(e,n){t.closure[n].status=e,a()&&r()};var t=new t,s={run:function(e){t.addClosure(e)},addEvent:function(e){for(var a in t.closure)t.closure[a].Log.addEvent(e)},browser:null,logResult:null,updateData:null};return s}();