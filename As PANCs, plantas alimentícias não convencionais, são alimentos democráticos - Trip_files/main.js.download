$(document).ready(function() {

	// Definindo os alvos das frases que sofrerão animação letra a letra
	var alvo_1 = $('#frame2 > h1');
	var alvo_2 = $('#frame4 > h2');
	
	// Pegando o texto dentro de cada alvo e os separando letra a letra para animação futura
	var frase_1 = alvo_1.text().replace(/./g, "<span>$&</span>").replace(/\s/g, " ");
	var frase_2 = alvo_2.text().replace(/./g, "<span>$&</span>").replace(/\s/g, " ");
	
	var animacao = new Timeline(alvo_1, alvo_2, frase_1, frase_2);
	animacao.frame1();

	$("#frame4 > a").bind({
		mouseenter: function() {
			$("div.saiba_mais").addClass("saiba_mais_hover");
		},
		mouseleave: function() {
			$("div.saiba_mais").removeClass("saiba_mais_hover");
		}
	});

});

var Timeline = function(alvo_1, alvo_2, frase_1, frase_2) {

	// Inserindo texto tratado dentro dos alvos para animação letra a letra
	alvo_1.html(frase_1);
	alvo_2.html(frase_2);
	
	this.frame1 = function() {
		TweenMax.to("#frame1 > img", 0.75, {delay: 1.4, opacity: 0});
		TweenMax.to("#background > img#background_number_1_blur", 0.75, {delay: 1.5, opacity: 0, onComplete() {
			TweenMax.to("#frame1", 0, {display: "none", onComplete: frame2_1});
		}});
	}

	var frame2_1 = function() {
		TweenMax.to("#frame2", 0, {display: "block", onComplete() {
			TweenMax.to("#frame2 > svg", 0.5, {opacity: 1});
			TweenMax.staggerTo("#frame2 > h1 > span", 0.05, {opacity: 1}, 0.05, frame2_2);
		}});
	}

	var frame2_2 = function() {
		TweenMax.to("#frame2 > h1 > span:last-child", 0.05, {opacity: 0, yoyo: true, repeat: -1, repeatDelay: 0.5});
		TweenMax.to("#frame2 > svg", 0.5, {delay: 2, opacity: 0});
		TweenMax.to("#frame2 > h1", 0.5, {delay: 2, height: 0, onComplete() {
			TweenMax.to("#frame2", 0, {display: 'none', onComplete: frame3});
		}});
	}

	var frame3 = function() {
		TweenMax.to("#frame3", 0, {display: "block", onComplete() {
			TweenMax.to("#frame3 > h3", 0.5, {height: 63, onComplete() {
				TweenMax.to("#frame3 > h3", 0.5, {delay: 3, height: 0, onComplete() {
					TweenMax.to("#frame3", 0, {display: "none", onComplete: background});
				}});
			}});
		}});
	}

	var background = function() {
		TweenMax.to("#background > img#background_number_2", 1.5, {top: "0px", ease: Power4.easeOut});
		TweenMax.to("#background > img#background_number_3", 1.5, {delay: 0.1, top: "0px", ease: Power4.easeOut, onComplete: frame4_1});
	}

	var frame4_1 = function() {
		TweenMax.to("#frame4", 0, {display: "block", onComplete() {
			TweenMax.to("#frame4 > svg", 0.5, {opacity: 1});
			TweenMax.staggerTo("#frame4 > h2 > span", 0.05, {opacity: 1}, 0.05, frame4_2);
		}});
	}

	var frame4_2 = function() {
		TweenMax.to("#frame4 > h2 > span:last-child", 0.05, {opacity: 0, yoyo: true, repeat: -1, repeatDelay: 0.5});
		TweenMax.to("#frame4 > img", 0.5, {opacity: 1});
		TweenMax.to("#frame4 > h4", 0.5, {height: 36});
		TweenMax.to("#frame4 > .saiba_mais", 0.5, {delay: 0.5, opacity: 1});
	}

}